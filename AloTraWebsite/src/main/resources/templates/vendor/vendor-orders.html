<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/vendor_layout :: layout(pageTitle='Qu·∫£n l√Ω ƒë∆°n h√†ng', pageContent=~{::content}, additionalJs=~{::additionalJs})}">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω ƒë∆°n h√†ng</title>
</head>
<body>
<th:block th:fragment="content">

    <div class="container-fluid">
        <h3 class="fw-bold mb-4"><i class="fas fa-receipt me-2"></i>Qu·∫£n l√Ω ƒë∆°n h√†ng</h3>

        <!-- üß≠ B·ªô l·ªçc tr·∫°ng th√°i -->
        <div class="mb-3 text-center">
            <div class="btn-group flex-wrap" role="group">
                <button type="button" class="btn btn-outline-primary active" data-status="">T·∫•t c·∫£</button>
                <button type="button" class="btn btn-outline-warning" data-status="PENDING">Ch·ªù x√°c nh·∫≠n</button>
                <button type="button" class="btn btn-outline-secondary" data-status="CONFIRMED">ƒê√£ x√°c nh·∫≠n</button>
                <button type="button" class="btn btn-outline-info" data-status="SHIPPING">ƒêang giao</button>
                <button type="button" class="btn btn-outline-success" data-status="COMPLETED">Ho√†n th√†nh</button>
                <button type="button" class="btn btn-outline-danger" data-status="CANCELED">ƒê√£ h·ªßy</button>
            </div>
        </div>
		 <!-- üîç B·ªô l·ªçc n√¢ng cao: th·ªùi gian + t√¨m ki·∫øm -->
        <div class="card shadow-sm mb-3">
            <div class="card-body">
                <div class="row g-2 align-items-end">
                    <div class="col-md-3">
                        <label class="form-label mb-1">T·ª´ ng√†y</label>
                        <input type="date" id="vendorOrderFrom" class="form-control" />
                    </div>
                    <div class="col-md-3">
                        <label class="form-label mb-1">ƒê·∫øn ng√†y</label>
                        <input type="date" id="vendorOrderTo" class="form-control" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label mb-1">T√¨m theo m√£ ƒë∆°n</label>
                        <input type="text" id="vendorOrderSearch" class="form-control" placeholder="Nh·∫≠p m√£ ƒë∆°n..." />
                    </div>
                    <div class="col-md-2 d-flex gap-2">
                        <button class="btn btn-primary w-100" id="vendorOrderApply">
                            <i class="fas fa-filter me-1"></i> L·ªçc
                        </button>
                        <button class="btn btn-outline-secondary" id="vendorOrderReload" title="L√†m m·ªõi">
                            <i class="fas fa-rotate"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- üì¶ Danh s√°ch ƒë∆°n h√†ng -->
        <div id="vendorOrdersList" class="d-flex flex-column gap-3">
            <div class="text-center text-muted py-5">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>
         <!-- üìë Thanh ph√¢n trang -->
<nav class="mt-4">
    <ul id="vendorOrdersPagination" class="pagination justify-content-center mb-0"></ul>
</nav>
    </div>

   <!-- üìú Modal chi ti·∫øt ƒë∆°n h√†ng -->
    <div class="modal fade" id="vendorOrderModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title fw-bold">
                        <i class="fas fa-box-open me-2"></i>ƒê∆°n h√†ng <span id="vendorModalOrderCode"></span>
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="vendorModalLoading" class="text-center py-3 text-muted">ƒêang t·∫£i...</div>
                    <div id="vendorModalContent" style="display:none;">

                        <!-- üïì Th√¥ng tin chung -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><strong>Ng√†y ƒë·∫∑t:</strong> <span id="vendorModalOrderDate"></span></p>
                                <p><strong>Ph∆∞∆°ng th·ª©c:</strong> <span id="vendorModalPayment"></span></p>
                            </div>
                            <div class="col-md-6 text-md-end">
                                <p><strong>Tr·∫°ng th√°i:</strong> <span class="badge fs-6" id="vendorModalOrderStatus"></span></p>
                                <p><strong>ƒê·ªãa ch·ªâ:</strong> <span id="vendorModalAddress"></span></p>
                            </div>
                        </div>

                        <!-- üí∞ T·ªïng h·ª£p -->
                        <div class="table-responsive mb-3">
                            <table class="table table-sm mb-0">
                                <tbody>
                                    <tr><td>T·∫°m t√≠nh</td><td class="text-end"><span id="vendorModalSubtotal"></span></td></tr>
                                    <tr><td>Gi·∫£m gi√°</td><td class="text-end text-danger">- <span id="vendorModalDiscount"></span></td></tr>
                                    <tr><td>Ph√≠ v·∫≠n chuy·ªÉn</td><td class="text-end"><span id="vendorModalShipping"></span></td></tr>
                                    <tr class="table-light fw-bold"><td>T·ªïng c·ªông</td><td class="text-end text-success"><span id="vendorModalTotal"></span></td></tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- üõçÔ∏è S·∫£n ph·∫©m -->
                        <h6 class="fw-bold mb-2">Danh s√°ch s·∫£n ph·∫©m</h6>
                        <div class="table-responsive">
                            <table class="table table-sm align-middle mb-0">
                                <thead>
                                    <tr>
                                        <th>T√™n SP</th>
                                        <th>Size</th>
                                        <th>SL</th>
                                        <th>Gi√°</th>
                                        <th>Th√†nh ti·ªÅn</th>
                                    </tr>
                                </thead>
                                <tbody id="vendorModalOrderItems"></tbody>
                            </table>
                        </div>

                        <!-- üïì Timeline -->
                        <h6 class="fw-bold mt-4 mb-2">L·ªãch s·ª≠ tr·∫°ng th√°i</h6>
                        <ul class="timeline list-unstyled" id="vendorModalOrderHistory"></ul>
                    </div>
                </div>
                <div class="modal-footer bg-light d-flex justify-content-between">
                    <div class="d-flex gap-2 flex-wrap">
                        <button id="btnVendorCancelOrder" class="btn btn-danger d-none">
                            <i class="fas fa-times me-1"></i>H·ªßy ƒë∆°n
                        </button>
                        <button id="btnVendorConfirmOrder" class="btn btn-success d-none">
                            <i class="fas fa-check me-1"></i>Duy·ªát ƒë∆°n
                        </button>
                        <button id="btnVendorShipOrder" class="btn btn-primary d-none">
                            <i class="fas fa-truck me-1"></i>Giao h√†ng
                        </button>
                    </div>
                    <button class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>
</th:block>

<th:block th:fragment="additionalJs">
    <script type="module" src="/alotra-website/js/vendor-orders.js"></script>
</th:block>
</body>
</html>
