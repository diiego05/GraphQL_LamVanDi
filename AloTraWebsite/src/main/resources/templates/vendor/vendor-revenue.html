<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/vendor_layout :: layout(${pageTitle}, ~{::pageContent}, ~{::additionalJs})}">
<head></head>
<body>
<div th:fragment="pageContent" class="container-fluid p-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3><i class="fas fa-sack-dollar me-2"></i>Th·ªëng k√™ doanh thu</h3>
        <div class="d-flex gap-2">
            <input type="date" class="form-control" id="filterFrom">
            <input type="date" class="form-control" id="filterTo">
            <button class="btn btn-primary" id="btnApplyFilter">
                <i class="fas fa-filter me-1"></i> √Åp d·ª•ng
            </button>
        </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs mb-4" id="statsTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="revenue-tab" data-bs-toggle="tab" data-bs-target="#revenuePane" type="button" role="tab">
                üìä Doanh thu
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="products-tab" data-bs-toggle="tab" data-bs-target="#productsPane" type="button" role="tab">
                üßã Top s·∫£n ph·∫©m
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="customers-tab" data-bs-toggle="tab" data-bs-target="#customersPane" type="button" role="tab">
                üë§ Top kh√°ch h√†ng
            </button>
        </li>
    </ul>

    <div class="tab-content" id="statsTabContent">
        <!-- ========== DOANH THU ========== -->
        <div class="tab-pane fade show active" id="revenuePane" role="tabpanel">
            <div class="d-flex justify-content-between mb-3">
                <h5>Bi·ªÉu ƒë·ªì doanh thu theo ng√†y</h5>
                <button class="btn btn-success btn-sm" id="btnExportRevenue">
                    <i class="fas fa-file-excel me-1"></i> Xu·∫•t Excel
                </button>
            </div>
            <canvas id="revenueChart" height="120"></canvas>

            <table class="table table-striped table-hover align-middle mt-4">
                <thead class="table-light">
                    <tr>
                        <th>Ng√†y</th>
                        <th>S·ªë ƒë∆°n</th>
                        <th>T·ªïng doanh thu</th>
                        <th>TB / ƒë∆°n</th>
                    </tr>
                </thead>
                <tbody id="revenueTableBody">
                    <tr><td colspan="4" class="text-center text-muted py-4">ƒêang t·∫£i...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- ========== TOP S·∫¢N PH·∫®M ========== -->
        <div class="tab-pane fade" id="productsPane" role="tabpanel">
            <div class="d-flex justify-content-between mb-3">
                <h5>Top s·∫£n ph·∫©m b√°n ch·∫°y</h5>
                <button class="btn btn-success btn-sm" id="btnExportProducts">
                    <i class="fas fa-file-excel me-1"></i> Xu·∫•t Excel
                </button>
            </div>
            <table class="table table-striped table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>M√£ SP</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>Doanh thu</th>
                    </tr>
                </thead>
                <tbody id="productsTableBody">
                    <tr><td colspan="4" class="text-center text-muted py-4">ƒêang t·∫£i...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- ========== TOP KH√ÅCH H√ÄNG ========== -->
        <div class="tab-pane fade" id="customersPane" role="tabpanel">
            <div class="d-flex justify-content-between mb-3">
                <h5>Top kh√°ch h√†ng th√¢n thi·∫øt</h5>
                <button class="btn btn-success btn-sm" id="btnExportCustomers">
                    <i class="fas fa-file-excel me-1"></i> Xu·∫•t Excel
                </button>
            </div>
            <table class="table table-striped table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>M√£ KH</th>
                        <th>T√™n kh√°ch h√†ng</th>
                        <th>T·ªïng ƒë∆°n</th>
                        <th>T·ªïng chi ti√™u</th>
                    </tr>
                </thead>
                <tbody id="customersTableBody">
                    <tr><td colspan="4" class="text-center text-muted py-4">ƒêang t·∫£i...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<div th:fragment="additionalJs">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" th:src="@{/js/vendor-statistics.js}"></script>
</div>
</body>
</html>
