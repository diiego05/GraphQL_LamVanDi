<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/admin-layout :: layout(pageTitle=${pageTitle}, pageContent=~{::content}, additionalJs=~{::additionalJs})}">

<!-- üì¢ DANH S√ÅCH CHI·∫æN D·ªäCH KHUY·∫æN M√ÉI -->
<th:block th:fragment="content">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>üì¢ Chi·∫øn d·ªãch khuy·∫øn m√£i</h3>
        <button class="btn btn-primary" id="btnAddCampaign">
            <i class="fas fa-plus me-2"></i> Th√™m m·ªõi
        </button>
    </div>

    <div class="card">
        <div class="table-responsive">
            <table class="table table-striped align-middle">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>T√™n</th>
                        <th>Lo·∫°i</th>
                        <th>Gi√° tr·ªã</th>
                        <th>Th·ªùi gian</th>
                        <th>L∆∞·ª£t xem</th>
                        <th>Banner</th>

                        <th>Tr·∫°ng th√°i</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody id="campaignTableBody"></tbody>
            </table>
        </div>
    </div>

    <!-- ü™Ñ Modal th√™m / s·ª≠a chi·∫øn d·ªãch -->
    <div class="modal fade" id="campaignModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Chi·∫øn d·ªãch khuy·∫øn m√£i</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="campaignForm" enctype="multipart/form-data">
                        <input type="hidden" name="id" id="campaignId">

                        <div class="mb-3">
                            <label class="form-label">T√™n chi·∫øn d·ªãch</label>
                            <input type="text" class="form-control" name="name" id="campaignName" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">M√¥ t·∫£</label>
                            <textarea class="form-control" name="description" id="campaignDescription" rows="3"></textarea>
                        </div>

                        <!-- üéØ Lo·∫°i gi·∫£m gi√° -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Lo·∫°i gi·∫£m gi√°</label>
                                <select class="form-select" name="type" id="campaignType" required>
                                    <option value="ORDER_PERCENT">Gi·∫£m % tr√™n ƒë∆°n h√†ng</option>
                                    <option value="ORDER_FIXED">Gi·∫£m ti·ªÅn c·ªë ƒë·ªãnh tr√™n ƒë∆°n h√†ng</option>
                                    <option value="SHIPPING_PERCENT">Gi·∫£m % ph√≠ v·∫≠n chuy·ªÉn</option>
                                    <option value="SHIPPING_FIXED">Gi·∫£m ti·ªÅn c·ªë ƒë·ªãnh ph√≠ v·∫≠n chuy·ªÉn</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Gi√° tr·ªã gi·∫£m</label>
                                <input type="number" step="0.01" class="form-control" name="value" id="campaignValue" required>
                            </div>
                        </div>

                        <!-- üïí Th·ªùi gian -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">B·∫Øt ƒë·∫ßu</label>
                                <input type="datetime-local" class="form-control" name="startAt" id="campaignStart" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">K·∫øt th√∫c</label>
                                <input type="datetime-local" class="form-control" name="endAt" id="campaignEnd" required>
                            </div>
                        </div>

                        <!-- üñºÔ∏è Banner -->
                        <div class="mb-3">
                            <label class="form-label">Banner</label>
                            <input type="file" class="form-control" name="bannerFile" id="campaignBanner" accept="image/*">
                            <img id="previewBanner" class="img-fluid mt-2 d-none rounded shadow-sm" style="max-height: 200px;">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button class="btn btn-primary" id="btnSaveCampaign">L∆∞u</button>
                </div>
            </div>
        </div>
    </div>

    <!-- üëÅÔ∏è Modal xem chi ti·∫øt chi·∫øn d·ªãch -->
    <div class="modal fade" id="campaignDetailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title fw-bold">Chi ti·∫øt chi·∫øn d·ªãch</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <img id="detailBanner" class="img-fluid rounded shadow-sm mb-3" style="max-height: 300px;">
                        <h4 id="detailTitle" class="fw-bold"></h4>
                        <p id="detailTime" class="text-muted small"></p>
                    </div>
                    <div class="border-top pt-3">
                        <h6 class="fw-bold mb-2">üìÑ M√¥ t·∫£</h6>
                        <p id="detailDescription" class="mb-0"></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>
</th:block>

<th:block th:fragment="additionalJs">
<script type="module" th:src="@{/js/promotions/admin-campaign.js}"></script>
</th:block>
</html>
